<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>mshadow: tensor_base.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">mshadow
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">tensor_base.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="tensor__base_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef MSHADOW_TENSOR_BASE_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define MSHADOW_TENSOR_BASE_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;cstdio&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;cfloat&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;climits&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00014"></a>00014 <span class="comment">// macro defintiions</span>
<a name="l00015"></a>00015 
<a name="l00017"></a>00017 <span class="preprocessor">#ifndef MSHADOW_STAND_ALONE</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">    #define MSHADOW_STAND_ALONE 0</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#if MSHADOW_STAND_ALONE</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">   #define MSHADOW_USE_CBLAS 0</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">   #define MSHADOW_USE_MKL   0</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">   #define MSHADOW_USE_CUDA  0</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 <span class="preprocessor">#ifndef MSHADOW_ALLOC_PAD</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">    #define MSHADOW_ALLOC_PAD true</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span>
<a name="l00030"></a>00030 <span class="preprocessor">#ifndef MSHADOW_USE_CBLAS</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">   #define MSHADOW_USE_CBLAS 0</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00034"></a>00034 <span class="preprocessor">#ifndef MSHADOW_USE_MKL</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">   #define MSHADOW_USE_MKL   1</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span>
<a name="l00038"></a>00038 <span class="preprocessor">#ifndef MSHADOW_USE_CUDA</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">  #define MSHADOW_USE_CUDA   1</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a>00042 <span class="preprocessor">#ifndef MSHADOW_SINGLE_PRECISION</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">  #define MSHADOW_SINGLE_PRECISION 1</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="preprocessor">#ifndef MSHADOW_USE_SSE</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span><span class="preprocessor">  #define MSHADOW_USE_SSE 1</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00050"></a>00050 <span class="comment">// SSE is conflict with cudacc</span>
<a name="l00051"></a>00051 <span class="preprocessor">#ifdef __CUDACC__</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">  #undef MSHADOW_USE_SSE</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">  #define MSHADOW_USE_SSE 0</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span>
<a name="l00056"></a>00056 <span class="preprocessor">#if MSHADOW_USE_CBLAS</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span>{
<a name="l00058"></a>00058 <span class="preprocessor">    #include &lt;cblas.h&gt;</span>
<a name="l00059"></a>00059 }
<a name="l00060"></a>00060 <span class="preprocessor">#elif MSHADOW_USE_MKL</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span><span class="preprocessor">  #include &lt;mkl.h&gt;</span>
<a name="l00062"></a>00062 <span class="preprocessor">  #include &lt;mkl_cblas.h&gt;</span>
<a name="l00063"></a>00063 <span class="preprocessor">  #include &lt;mkl_vsl.h&gt;</span>
<a name="l00064"></a>00064 <span class="preprocessor">  #include &lt;mkl_vsl_functions.h&gt;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#endif</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00067"></a>00067 <span class="preprocessor">#if MSHADOW_USE_CUDA</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="preprocessor">  #include &lt;cublas.h&gt;</span>
<a name="l00069"></a>00069 <span class="preprocessor">  #include &lt;curand.h&gt;</span>
<a name="l00070"></a>00070 <span class="preprocessor">#endif</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>
<a name="l00072"></a>00072 <span class="comment">// --------------------------------</span>
<a name="l00073"></a>00073 <span class="comment">// MSHADOW_XINLINE is used for inlining template code for both CUDA and CPU code.</span>
<a name="l00074"></a>00074 <span class="preprocessor">#ifdef MSHADOW_XINLINE</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span><span class="preprocessor">  #error &quot;MSHADOW_XINLINE must not be defined&quot;</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span><span class="preprocessor">#ifdef __CUDACC__</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span><span class="preprocessor">  #define MSHADOW_XINLINE inline __attribute__((always_inline)) __device__ __host__</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span><span class="preprocessor">  #define MSHADOW_XINLINE inline __attribute__((always_inline))</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span><span class="comment">// cpu force inline</span>
<a name="l00083"></a>00083 <span class="preprocessor">#define MSHADOW_CINLINE inline __attribute__((always_inline))</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span>
<a name="l00086"></a>00086 <span class="keyword">namespace </span>mshadow {
<a name="l00088"></a><a class="code" href="namespacemshadow.html#ac4cba6b672478463350f7d84b47e99e3">00088</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacemshadow.html#ac4cba6b672478463350f7d84b47e99e3" title="buffer size for each random number generator">kRandBufferSize</a> = 1000000;
<a name="l00090"></a><a class="code" href="namespacemshadow.html#a8afab1f2134d65e09679faa324ecf9ce">00090</a>     <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="namespacemshadow.html#a8afab1f2134d65e09679faa324ecf9ce" title="pi">kPi</a> = 3.1415926f;
<a name="l00092"></a><a class="code" href="namespacemshadow.html#a923c009db83886897525cea4844f350b">00092</a>     <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespacemshadow.html#a923c009db83886897525cea4844f350b" title="pooling type">kMaxPooling</a> = 1;
<a name="l00094"></a><a class="code" href="namespacemshadow.html#a5084e534ab0c22e84224dda685337908">00094</a>     <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespacemshadow.html#a5084e534ab0c22e84224dda685337908" title="pooling type">kSumPooling</a> = 2;
<a name="l00096"></a><a class="code" href="namespacemshadow.html#ac5673ef7e80681c05d89e4de4b61e8d5">00096</a>     <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespacemshadow.html#ac5673ef7e80681c05d89e4de4b61e8d5" title="pooling type">kAvgPooling</a> = 3;
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="preprocessor">#if MSHADOW_SINGLE_PRECISION</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span>
<a name="l00100"></a><a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3">00100</a>     <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a>;
<a name="l00101"></a>00101 <span class="preprocessor">#else</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span>    <span class="keyword">typedef</span> <span class="keywordtype">double</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a>;
<a name="l00103"></a>00103 <span class="preprocessor">#endif</span>
<a name="l00104"></a>00104 <span class="preprocessor"></span>
<a name="l00105"></a><a class="code" href="namespacemshadow.html#a6b28b89656a269ae8d5188964c3b3adb">00105</a>     <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacemshadow.html#a6b28b89656a269ae8d5188964c3b3adb" title="type that will be used for index">index_t</a>;
<a name="l00106"></a>00106 }; <span class="comment">// namespace mshadow</span>
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 <span class="keyword">namespace </span>mshadow {
<a name="l00110"></a><a class="code" href="namespacemshadow_1_1op.html">00110</a>     <span class="keyword">namespace </span>op {
<a name="l00111"></a>00111         <span class="comment">// binary operator        </span>
<a name="l00113"></a><a class="code" href="structmshadow_1_1op_1_1mul.html">00113</a> <span class="comment"></span>        <span class="keyword">struct </span><a class="code" href="structmshadow_1_1op_1_1mul.html" title="mul operator">mul</a>{
<a name="l00115"></a><a class="code" href="structmshadow_1_1op_1_1mul.html#ac3471d25b3670c358a9253608dd6795c">00115</a>             MSHADOW_XINLINE <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1op_1_1mul.html#ac3471d25b3670c358a9253608dd6795c" title="map a, b to result using defined operation">Map</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> a, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> b) {
<a name="l00116"></a>00116                 <span class="keywordflow">return</span> a * b;
<a name="l00117"></a>00117             }
<a name="l00118"></a>00118         };
<a name="l00120"></a><a class="code" href="structmshadow_1_1op_1_1plus.html">00120</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1op_1_1plus.html" title="plus operator">plus</a> {
<a name="l00122"></a><a class="code" href="structmshadow_1_1op_1_1plus.html#aa45aac45baa173c81238de3fabbd1bf4">00122</a>             MSHADOW_XINLINE <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1op_1_1plus.html#aa45aac45baa173c81238de3fabbd1bf4" title="map a, b to result using defined operation">Map</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> a, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> b) {
<a name="l00123"></a>00123                 <span class="keywordflow">return</span> a + b;
<a name="l00124"></a>00124             }
<a name="l00125"></a>00125         };
<a name="l00127"></a><a class="code" href="structmshadow_1_1op_1_1minus.html">00127</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1op_1_1minus.html" title="minus operator">minus</a> {
<a name="l00129"></a><a class="code" href="structmshadow_1_1op_1_1minus.html#ae758ddf9e1ac7b983c8aac57b58f823b">00129</a>             MSHADOW_XINLINE <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1op_1_1minus.html#ae758ddf9e1ac7b983c8aac57b58f823b" title="map a, b to result using defined operation">Map</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> a, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> b) {
<a name="l00130"></a>00130                 <span class="keywordflow">return</span> a - b;
<a name="l00131"></a>00131             }
<a name="l00132"></a>00132         };
<a name="l00134"></a><a class="code" href="structmshadow_1_1op_1_1div.html">00134</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1op_1_1div.html" title="divide operator">div</a> {
<a name="l00136"></a><a class="code" href="structmshadow_1_1op_1_1div.html#a9c4c538f7df5a49382e8269b3c1b6400">00136</a>             MSHADOW_XINLINE <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1op_1_1div.html#a9c4c538f7df5a49382e8269b3c1b6400" title="map a, b to result using defined operation">Map</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> a, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> b) {
<a name="l00137"></a>00137                 <span class="keywordflow">return</span> a / b;
<a name="l00138"></a>00138             }
<a name="l00139"></a>00139         };
<a name="l00141"></a><a class="code" href="structmshadow_1_1op_1_1right.html">00141</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1op_1_1right.html" title="get rhs">right</a> {
<a name="l00143"></a><a class="code" href="structmshadow_1_1op_1_1right.html#a872f5899e2628636cdc1874bbb91edb0">00143</a>             MSHADOW_XINLINE <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1op_1_1right.html#a872f5899e2628636cdc1874bbb91edb0" title="map a, b to result using defined operation">Map</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> a, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> b) {
<a name="l00144"></a>00144                 <span class="keywordflow">return</span> b;
<a name="l00145"></a>00145             }
<a name="l00146"></a>00146         };
<a name="l00147"></a>00147     }; <span class="comment">// namespace op</span>
<a name="l00148"></a>00148 
<a name="l00150"></a><a class="code" href="namespacemshadow_1_1sv.html">00150</a>     <span class="keyword">namespace </span>sv {
<a name="l00152"></a><a class="code" href="structmshadow_1_1sv_1_1saveto.html">00152</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1sv_1_1saveto.html" title="save to saver: =">saveto</a> {
<a name="l00154"></a><a class="code" href="structmshadow_1_1sv_1_1saveto.html#ae56acfe9a62b6696ebe40fe9ef771caf">00154</a>             MSHADOW_XINLINE <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structmshadow_1_1sv_1_1saveto.html#ae56acfe9a62b6696ebe40fe9ef771caf" title="save b to a using save method">Save</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a>&amp; a, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> b) {
<a name="l00155"></a>00155                 a  = b;
<a name="l00156"></a>00156             }
<a name="l00158"></a><a class="code" href="structmshadow_1_1sv_1_1saveto.html#a93ae65a62a0a87ad1faa681faa3b1e2c">00158</a>             <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1sv_1_1saveto.html#a93ae65a62a0a87ad1faa681faa3b1e2c" title="helper constant to use BLAS, alpha">kAlphaBLAS</a> = 1.0f;
<a name="l00160"></a><a class="code" href="structmshadow_1_1sv_1_1saveto.html#a9aec3fda8bf60e8d9ada89e28961c651">00160</a>             <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1sv_1_1saveto.html#a9aec3fda8bf60e8d9ada89e28961c651" title="helper constant to use BLAS, beta">kBetaBLAS</a>  = 0.0f;
<a name="l00162"></a><a class="code" href="structmshadow_1_1sv_1_1saveto.html#ac78ceb69e8291f8fa767c2eda2a732a5">00162</a>             <span class="keyword">typedef</span> <a class="code" href="structmshadow_1_1op_1_1right.html" title="get rhs">op::right</a> <a class="code" href="structmshadow_1_1sv_1_1saveto.html#ac78ceb69e8291f8fa767c2eda2a732a5" title="corresponding binary operator type">OPType</a>;
<a name="l00163"></a>00163         };
<a name="l00165"></a><a class="code" href="structmshadow_1_1sv_1_1plusto.html">00165</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1sv_1_1plusto.html" title="save to saver: +=">plusto</a> {
<a name="l00167"></a><a class="code" href="structmshadow_1_1sv_1_1plusto.html#afca747bcd43ce737340cfec56f787614">00167</a>             MSHADOW_XINLINE <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structmshadow_1_1sv_1_1plusto.html#afca747bcd43ce737340cfec56f787614" title="save b to a using save method">Save</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a>&amp; a, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> b) {
<a name="l00168"></a>00168                 a += b;
<a name="l00169"></a>00169             }
<a name="l00171"></a><a class="code" href="structmshadow_1_1sv_1_1plusto.html#a559c844ad082db7f7153503db1644c20">00171</a>             <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1sv_1_1plusto.html#a559c844ad082db7f7153503db1644c20" title="helper constant to use BLAS, alpha">kAlphaBLAS</a> = 1.0f;
<a name="l00173"></a><a class="code" href="structmshadow_1_1sv_1_1plusto.html#ad544a6f615f1de48c8a90ebecc54c9dc">00173</a>             <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1sv_1_1plusto.html#ad544a6f615f1de48c8a90ebecc54c9dc" title="helper constant to use BLAS, beta">kBetaBLAS</a>  = 1.0f;
<a name="l00175"></a><a class="code" href="structmshadow_1_1sv_1_1plusto.html#a0b3849b290f3207a59b8975e2b29b065">00175</a>             <span class="keyword">typedef</span> <a class="code" href="structmshadow_1_1op_1_1plus.html" title="plus operator">op::plus</a> <a class="code" href="structmshadow_1_1sv_1_1plusto.html#a0b3849b290f3207a59b8975e2b29b065" title="corresponding binary operator type">OPType</a>;
<a name="l00176"></a>00176         };
<a name="l00178"></a><a class="code" href="structmshadow_1_1sv_1_1minusto.html">00178</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1sv_1_1minusto.html" title="minus to saver: -=">minusto</a> {
<a name="l00180"></a><a class="code" href="structmshadow_1_1sv_1_1minusto.html#a7127925bf5321d770856fb64112f9bc8">00180</a>             MSHADOW_XINLINE <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structmshadow_1_1sv_1_1minusto.html#a7127925bf5321d770856fb64112f9bc8" title="save b to a using save method">Save</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a>&amp; a, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> b) {
<a name="l00181"></a>00181                 a -= b;
<a name="l00182"></a>00182             }
<a name="l00184"></a><a class="code" href="structmshadow_1_1sv_1_1minusto.html#aa9ffaeaf187561d3e0861e9a3e424a07">00184</a>             <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1sv_1_1minusto.html#aa9ffaeaf187561d3e0861e9a3e424a07" title="helper constant to use BLAS, alpha">kAlphaBLAS</a> = -1.0f;
<a name="l00186"></a><a class="code" href="structmshadow_1_1sv_1_1minusto.html#a2bc244023027291e9b0435b6eb17d714">00186</a>             <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1sv_1_1minusto.html#a2bc244023027291e9b0435b6eb17d714" title="helper constant to use BLAS, beta">kBetaBLAS</a>  = 1.0f;
<a name="l00188"></a><a class="code" href="structmshadow_1_1sv_1_1minusto.html#ac9baef2b9d3a92b962c9ad7f7ee1122d">00188</a>             <span class="keyword">typedef</span> <a class="code" href="structmshadow_1_1op_1_1minus.html" title="minus operator">op::minus</a> <a class="code" href="structmshadow_1_1sv_1_1minusto.html#ac9baef2b9d3a92b962c9ad7f7ee1122d" title="corresponding binary operator type">OPType</a>;
<a name="l00189"></a>00189         };
<a name="l00191"></a><a class="code" href="structmshadow_1_1sv_1_1multo.html">00191</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1sv_1_1multo.html" title="multiply to saver: *=">multo</a> {
<a name="l00193"></a><a class="code" href="structmshadow_1_1sv_1_1multo.html#a415edbe669e7c773ebc4ef5074f74b3e">00193</a>             MSHADOW_XINLINE <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structmshadow_1_1sv_1_1multo.html#a415edbe669e7c773ebc4ef5074f74b3e" title="save b to a using save method">Save</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a>&amp; a, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> b) {
<a name="l00194"></a>00194                 a *= b;
<a name="l00195"></a>00195             }
<a name="l00197"></a><a class="code" href="structmshadow_1_1sv_1_1multo.html#acc47e9c85d6e583e5785ba0f62fa4431">00197</a>             <span class="keyword">typedef</span> <a class="code" href="structmshadow_1_1op_1_1mul.html" title="mul operator">op::mul</a> <a class="code" href="structmshadow_1_1sv_1_1multo.html#acc47e9c85d6e583e5785ba0f62fa4431" title="corresponding binary operator type">OPType</a>;
<a name="l00198"></a>00198         };
<a name="l00200"></a><a class="code" href="structmshadow_1_1sv_1_1divto.html">00200</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1sv_1_1divto.html" title="divide to saver: /=">divto</a> {
<a name="l00202"></a><a class="code" href="structmshadow_1_1sv_1_1divto.html#aab538d3fc55c4dc763084e1fa17eeb45">00202</a>             MSHADOW_XINLINE <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structmshadow_1_1sv_1_1divto.html#aab538d3fc55c4dc763084e1fa17eeb45" title="save b to a using save method">Save</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a>&amp; a, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> b) {
<a name="l00203"></a>00203                 a /= b;
<a name="l00204"></a>00204             }
<a name="l00206"></a><a class="code" href="structmshadow_1_1sv_1_1divto.html#ab8864c99eea0286fce8f5a8f791f0f33">00206</a>             <span class="keyword">typedef</span> <a class="code" href="structmshadow_1_1op_1_1div.html" title="divide operator">op::div</a> <a class="code" href="structmshadow_1_1sv_1_1divto.html#ab8864c99eea0286fce8f5a8f791f0f33" title="corresponding binary operator type">OPType</a>;
<a name="l00207"></a>00207         };
<a name="l00208"></a>00208     }; <span class="comment">// namespace sv</span>
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 
<a name="l00211"></a>00211     <span class="keyword">namespace </span>op {
<a name="l00212"></a>00212         <span class="comment">// unary operator/ function: example</span>
<a name="l00213"></a>00213         <span class="comment">// these operators can be defined by user, in the same style as binary and unary operator</span>
<a name="l00214"></a>00214         <span class="comment">// to use, simply write F&lt;op::identity&gt;( src )</span>
<a name="l00216"></a><a class="code" href="structmshadow_1_1op_1_1identity.html">00216</a> <span class="comment"></span>        <span class="keyword">struct </span><a class="code" href="structmshadow_1_1op_1_1identity.html" title="identity function that maps a real number to it self">identity</a>{
<a name="l00218"></a><a class="code" href="structmshadow_1_1op_1_1identity.html#a05d662d7f161f6b996ed36a826d1221f">00218</a>             MSHADOW_XINLINE <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1op_1_1identity.html#a05d662d7f161f6b996ed36a826d1221f" title="map a to result using defined operation">Map</a>(<a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> a) {
<a name="l00219"></a>00219                 <span class="keywordflow">return</span> a;
<a name="l00220"></a>00220             }
<a name="l00221"></a>00221         };
<a name="l00222"></a>00222     }; <span class="comment">// namespace op</span>
<a name="l00223"></a>00223 
<a name="l00225"></a><a class="code" href="namespacemshadow_1_1red.html">00225</a>     <span class="keyword">namespace </span>red {
<a name="l00227"></a><a class="code" href="structmshadow_1_1red_1_1sum.html">00227</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1red_1_1sum.html" title="sum reducer">sum</a> {
<a name="l00229"></a><a class="code" href="structmshadow_1_1red_1_1sum.html#aeef29340cf38fd614f33c6e1428b1363">00229</a>             MSHADOW_XINLINE <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structmshadow_1_1red_1_1sum.html#aeef29340cf38fd614f33c6e1428b1363" title="do reduction into dst">Reduce</a>( <span class="keyword">volatile</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a>&amp; dst,  <span class="keyword">volatile</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> src ) {
<a name="l00230"></a>00230                 dst += src;
<a name="l00231"></a>00231             }
<a name="l00233"></a><a class="code" href="structmshadow_1_1red_1_1sum.html#ac05c41d8c2ab606bfdfd0f11c8494246">00233</a>             MSHADOW_XINLINE <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1red_1_1sum.html#ac05c41d8c2ab606bfdfd0f11c8494246" title="calculate gradient of redres with respect to redsrc, redres: reduced result, redsrc: one of reduction...">PartialGrad</a>( <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> redres, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> redsrc ) {
<a name="l00234"></a>00234                 <span class="keywordflow">return</span> 1.0f;
<a name="l00235"></a>00235             }
<a name="l00237"></a><a class="code" href="structmshadow_1_1red_1_1sum.html#a5abf8334af82dbd98e2c9e57ec1f44fe">00237</a>             <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1red_1_1sum.html#a5abf8334af82dbd98e2c9e57ec1f44fe" title="an intial value of reducer">kInitV</a> = 0.0f;
<a name="l00238"></a>00238         };
<a name="l00240"></a><a class="code" href="structmshadow_1_1red_1_1maximum.html">00240</a>         <span class="keyword">struct </span><a class="code" href="structmshadow_1_1red_1_1maximum.html" title="maximum reducer">maximum</a> {
<a name="l00242"></a><a class="code" href="structmshadow_1_1red_1_1maximum.html#a9b27221f420d4cc2d76d206c987bd80d">00242</a>             MSHADOW_XINLINE <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structmshadow_1_1red_1_1maximum.html#a9b27221f420d4cc2d76d206c987bd80d" title="do reduction into dst">Reduce</a>( <span class="keyword">volatile</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a>&amp; dst,  <span class="keyword">volatile</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> src ) {
<a name="l00243"></a>00243                 <span class="keyword">using namespace </span>std;
<a name="l00244"></a>00244                 dst = max( dst, src );
<a name="l00245"></a>00245             }
<a name="l00247"></a><a class="code" href="structmshadow_1_1red_1_1maximum.html#ad8daff56e8839d2362ca37a41a98517a">00247</a>             MSHADOW_XINLINE <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1red_1_1maximum.html#ad8daff56e8839d2362ca37a41a98517a" title="calculate gradient of redres with respect to redsrc, redres: reduced result, redsrc: one of reduction...">PartialGrad</a>( <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> redres, <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> redsrc ) {
<a name="l00248"></a>00248                 <span class="keywordflow">return</span> redres == redsrc ? 1.0f: 0.0f;
<a name="l00249"></a>00249             }
<a name="l00251"></a>00251 <span class="preprocessor">#if MSHADOW_SINGLE_PRECISION</span>
<a name="l00252"></a><a class="code" href="structmshadow_1_1red_1_1maximum.html#afa1fb00f41e7646b804b4e4c5a8bc979">00252</a> <span class="preprocessor"></span>            <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> <a class="code" href="structmshadow_1_1red_1_1maximum.html#afa1fb00f41e7646b804b4e4c5a8bc979" title="an intial value of reducer">kInitV</a> = -FLT_MAX;
<a name="l00253"></a>00253 <span class="preprocessor">#else</span>
<a name="l00254"></a>00254 <span class="preprocessor"></span>            <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="namespacemshadow.html#a890e0d9f3c7c59f4ec64e89bd5235ce3" title="type that will be used for content">real_t</a> kInitV = -DBL_MAX;
<a name="l00255"></a>00255 <span class="preprocessor">#endif</span>
<a name="l00256"></a>00256 <span class="preprocessor"></span>        };
<a name="l00257"></a>00257     };
<a name="l00258"></a>00258 
<a name="l00260"></a><a class="code" href="namespacemshadow_1_1utils.html">00260</a>     <span class="keyword">namespace </span>utils{
<a name="l00262"></a><a class="code" href="namespacemshadow_1_1utils.html#a86b93a858c8d31e36c86ff5ea0dccbc9">00262</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacemshadow_1_1utils.html#a86b93a858c8d31e36c86ff5ea0dccbc9" title="send error message then exit">Error</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *msg ){
<a name="l00263"></a>00263             fprintf( stderr, <span class="stringliteral">&quot;Error:%s\n&quot;</span>,msg );
<a name="l00264"></a>00264             exit( -1 );
<a name="l00265"></a>00265         }
<a name="l00267"></a><a class="code" href="namespacemshadow_1_1utils.html#a4915c3aa064de295a81323f5386f1cd6">00267</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacemshadow_1_1utils.html#a4915c3aa064de295a81323f5386f1cd6" title="assert a expression is true">Assert</a>( <span class="keywordtype">bool</span> exp ){
<a name="l00268"></a>00268             <span class="keywordflow">if</span>( !exp ) <a class="code" href="namespacemshadow_1_1utils.html#a86b93a858c8d31e36c86ff5ea0dccbc9" title="send error message then exit">Error</a>( <span class="stringliteral">&quot;AssertError&quot;</span> );
<a name="l00269"></a>00269         }
<a name="l00271"></a><a class="code" href="namespacemshadow_1_1utils.html#a9b26c48f1109146dc0aee5a0f1d46d08">00271</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacemshadow_1_1utils.html#a4915c3aa064de295a81323f5386f1cd6" title="assert a expression is true">Assert</a>( <span class="keywordtype">bool</span> exp, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg ){
<a name="l00272"></a>00272             <span class="keywordflow">if</span>( !exp ) <a class="code" href="namespacemshadow_1_1utils.html#a86b93a858c8d31e36c86ff5ea0dccbc9" title="send error message then exit">Error</a>( msg );
<a name="l00273"></a>00273         }
<a name="l00275"></a><a class="code" href="namespacemshadow_1_1utils.html#a38b8b6a2822bc8263b5c186c6986f8f2">00275</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacemshadow_1_1utils.html#a38b8b6a2822bc8263b5c186c6986f8f2" title="warning">Warning</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *msg ){
<a name="l00276"></a>00276             fprintf( stderr, <span class="stringliteral">&quot;warning:%s\n&quot;</span>,msg );
<a name="l00277"></a>00277         }
<a name="l00278"></a>00278     }; <span class="comment">// namespace utils</span>
<a name="l00279"></a>00279 }; <span class="comment">// namespace mshadow</span>
<a name="l00280"></a>00280 <span class="preprocessor">#endif // TENSOR_BASE_H</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 26 2014 19:04:32 for mshadow by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
